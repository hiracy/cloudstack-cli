#!/usr/bin/env ruby

$LOAD_PATH.unshift File.dirname(__FILE__)

require "thor"
require './lib/cloudstack-bootstrap'

class CsBootstrap < Thor
  class_option :verbose, :type => :boolean
  
  desc "create_server NAME", "create a server"
  option :zone, :required => true
  option :template, :required => true
  option :offering, :required => true
  option :network, :required => true
  option :project
  option :ports, :type => :hash
  option :interactive, :type => :boolean

  def create_server(name)
    Cloudstack::Bootstrap::Cli.new.bootstrap_server(
        name,
        options[:zone],
        options[:template],
        options[:offering],
        [options[:network]],
        options[:ports],
        options[:project]
      )
  end
end
 
CsBootstrap.start(ARGV)